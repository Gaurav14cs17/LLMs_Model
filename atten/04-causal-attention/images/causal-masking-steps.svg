<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 650">
  <defs>
    <linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="maskGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e17055;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d63031;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="softmaxGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#55efc4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00b894;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="950" height="650" fill="#0d1117"/>
  
  <!-- Title -->
  <text x="475" y="30" text-anchor="middle" fill="#fff" font-family="Georgia, serif" font-size="20" font-weight="bold">How Causal Masking Works: Step by Step</text>
  <text x="475" y="52" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="12">Example: "The cat sat on"</text>
  
  <!-- STEP 1: Raw Scores -->
  <rect x="30" y="70" width="80" height="25" rx="5" fill="url(#scoreGrad)"/>
  <text x="70" y="87" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">STEP 1</text>
  <text x="130" y="87" fill="#4facfe" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Compute Raw Attention Scores (QK^T)</text>
  
  <rect x="50" y="105" width="400" height="180" rx="10" fill="#161b22" stroke="#4facfe" stroke-width="1"/>
  
  <!-- Score matrix header -->
  <text x="180" y="130" text-anchor="middle" fill="#4facfe" font-family="Arial, sans-serif" font-size="11">Keys â†’</text>
  <text x="120" y="160" fill="#f093fb" font-family="Arial, sans-serif" font-size="10">Queries â†“</text>
  <text x="190" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">The</text>
  <text x="250" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">cat</text>
  <text x="310" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">sat</text>
  <text x="370" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">on</text>
  
  <!-- Row labels -->
  <text x="150" y="175" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">The</text>
  <text x="150" y="205" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">cat</text>
  <text x="150" y="235" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">sat</text>
  <text x="150" y="265" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">on</text>
  
  <!-- Score values -->
  <text x="190" y="175" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.8</text>
  <text x="250" y="175" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.4</text>
  <text x="310" y="175" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.3</text>
  <text x="370" y="175" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.2</text>
  
  <text x="190" y="205" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.5</text>
  <text x="250" y="205" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.9</text>
  <text x="310" y="205" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.6</text>
  <text x="370" y="205" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.4</text>
  
  <text x="190" y="235" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.3</text>
  <text x="250" y="235" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.7</text>
  <text x="310" y="235" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.8</text>
  <text x="370" y="235" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.5</text>
  
  <text x="190" y="265" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.4</text>
  <text x="250" y="265" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.5</text>
  <text x="310" y="265" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.6</text>
  <text x="370" y="265" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.7</text>
  
  <!-- Arrow -->
  <path d="M 450 190 L 500 190" stroke="#4facfe" stroke-width="2"/>
  <polygon points="510,190 500,185 500,195" fill="#4facfe"/>
  
  <!-- STEP 2: Add Mask -->
  <rect x="520" y="70" width="80" height="25" rx="5" fill="url(#maskGrad)"/>
  <text x="560" y="87" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">STEP 2</text>
  <text x="620" y="87" fill="#e17055" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Apply Causal Mask (Add -âˆž)</text>
  
  <rect x="520" y="105" width="400" height="180" rx="10" fill="#161b22" stroke="#e17055" stroke-width="1"/>
  
  <!-- Headers -->
  <text x="670" y="130" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11">Future positions â†’ -âˆž</text>
  <text x="680" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">The</text>
  <text x="740" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">cat</text>
  <text x="800" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">sat</text>
  <text x="860" y="145" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">on</text>
  
  <text x="640" y="175" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">The</text>
  <text x="640" y="205" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">cat</text>
  <text x="640" y="235" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">sat</text>
  <text x="640" y="265" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">on</text>
  
  <!-- Masked values -->
  <text x="680" y="175" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.8</text>
  <text x="740" y="175" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11" font-weight="bold">-âˆž</text>
  <text x="800" y="175" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11" font-weight="bold">-âˆž</text>
  <text x="860" y="175" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11" font-weight="bold">-âˆž</text>
  
  <text x="680" y="205" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.5</text>
  <text x="740" y="205" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.9</text>
  <text x="800" y="205" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11" font-weight="bold">-âˆž</text>
  <text x="860" y="205" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11" font-weight="bold">-âˆž</text>
  
  <text x="680" y="235" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.3</text>
  <text x="740" y="235" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.7</text>
  <text x="800" y="235" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.8</text>
  <text x="860" y="235" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11" font-weight="bold">-âˆž</text>
  
  <text x="680" y="265" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.4</text>
  <text x="740" y="265" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.5</text>
  <text x="800" y="265" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.6</text>
  <text x="860" y="265" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">0.7</text>
  
  <!-- Arrow down -->
  <path d="M 720 285 L 720 310" stroke="#e17055" stroke-width="2"/>
  <polygon points="720,320 715,310 725,310" fill="#e17055"/>
  
  <!-- STEP 3: After Softmax -->
  <rect x="220" y="340" width="80" height="25" rx="5" fill="url(#softmaxGrad)"/>
  <text x="260" y="357" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">STEP 3</text>
  <text x="320" y="357" fill="#55efc4" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Apply Softmax (Row-wise)</text>
  
  <rect x="220" y="375" width="510" height="200" rx="10" fill="#161b22" stroke="#55efc4" stroke-width="1"/>
  
  <!-- Headers -->
  <text x="475" y="400" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">softmax(-âˆž) = 0 â€¢ Rows sum to 1.0</text>
  <text x="330" y="430" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">The</text>
  <text x="400" y="430" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">cat</text>
  <text x="470" y="430" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">sat</text>
  <text x="540" y="430" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">on</text>
  <text x="620" y="430" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">Sum</text>
  
  <text x="270" y="460" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">The</text>
  <text x="270" y="495" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">cat</text>
  <text x="270" y="530" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">sat</text>
  <text x="270" y="565" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">on</text>
  
  <!-- Final weights -->
  <rect x="310" y="445" width="40" height="25" rx="4" fill="#55efc4" opacity="0.3"/>
  <text x="330" y="462" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11" font-weight="bold">1.00</text>
  <text x="400" y="462" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">0.00</text>
  <text x="470" y="462" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">0.00</text>
  <text x="540" y="462" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">0.00</text>
  <text x="620" y="462" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="10">âœ“ 1.0</text>
  
  <text x="330" y="497" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.40</text>
  <rect x="380" y="482" width="40" height="25" rx="4" fill="#55efc4" opacity="0.3"/>
  <text x="400" y="497" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11" font-weight="bold">0.60</text>
  <text x="470" y="497" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">0.00</text>
  <text x="540" y="497" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">0.00</text>
  <text x="620" y="497" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="10">âœ“ 1.0</text>
  
  <text x="330" y="532" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.22</text>
  <text x="400" y="532" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.35</text>
  <rect x="450" y="517" width="40" height="25" rx="4" fill="#55efc4" opacity="0.3"/>
  <text x="470" y="532" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11" font-weight="bold">0.43</text>
  <text x="540" y="532" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">0.00</text>
  <text x="620" y="532" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="10">âœ“ 1.0</text>
  
  <text x="330" y="567" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.18</text>
  <text x="400" y="567" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.22</text>
  <text x="470" y="567" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">0.26</text>
  <rect x="520" y="552" width="40" height="25" rx="4" fill="#55efc4" opacity="0.3"/>
  <text x="540" y="567" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11" font-weight="bold">0.34</text>
  <text x="620" y="567" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="10">âœ“ 1.0</text>
  
  <!-- Key insight -->
  <rect x="220" y="590" width="510" height="45" rx="6" fill="#21262d" stroke="#fdcb6e" stroke-width="1"/>
  <text x="475" y="612" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ðŸ’¡ Each position only attends to itself and previous positions</text>
  <text x="475" y="628" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Future positions become 0 weight â†’ no information leakage!</text>
</svg>

