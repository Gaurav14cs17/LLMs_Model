<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 500">
  <defs>
    <linearGradient id="encBlock" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00b894;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00cec9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="decBlock" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e17055;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d63031;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="crossBlock" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6c5ce7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#a29bfe;stop-opacity:1" />
    </linearGradient>
    <filter id="blockShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="850" height="500" fill="#0d1117"/>
  
  <!-- Title -->
  <text x="425" y="30" text-anchor="middle" fill="#fff" font-family="Georgia, serif" font-size="18" font-weight="bold">Encoder-Decoder Architecture with Cross-Attention</text>
  
  <!-- ENCODER SIDE -->
  <rect x="50" y="60" width="280" height="380" rx="15" fill="#161b22" stroke="#00b894" stroke-width="2"/>
  <text x="190" y="90" text-anchor="middle" fill="#00b894" font-family="Arial, sans-serif" font-size="16" font-weight="bold">ENCODER</text>
  
  <!-- Input embedding -->
  <rect x="80" y="115" width="220" height="40" rx="6" fill="#21262d" stroke="#00b894" stroke-width="1"/>
  <text x="190" y="140" text-anchor="middle" fill="#00b894" font-family="Arial, sans-serif" font-size="11">Input Embedding + Positional</text>
  
  <!-- Encoder self-attention -->
  <rect x="80" y="170" width="220" height="50" rx="8" fill="url(#encBlock)" filter="url(#blockShadow)"/>
  <text x="190" y="192" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Self-Attention</text>
  <text x="190" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="Arial, sans-serif" font-size="10">(Bidirectional)</text>
  
  <!-- Add & Norm -->
  <rect x="80" y="230" width="220" height="25" rx="4" fill="#21262d" stroke="#00b894" stroke-width="1"/>
  <text x="190" y="247" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Add & Layer Norm</text>
  
  <!-- FFN -->
  <rect x="80" y="265" width="220" height="40" rx="8" fill="url(#encBlock)" filter="url(#blockShadow)"/>
  <text x="190" y="290" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Feed Forward</text>
  
  <!-- Add & Norm -->
  <rect x="80" y="315" width="220" height="25" rx="4" fill="#21262d" stroke="#00b894" stroke-width="1"/>
  <text x="190" y="332" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Add & Layer Norm</text>
  
  <!-- Nx indicator -->
  <text x="310" y="250" fill="#00b894" font-family="Arial, sans-serif" font-size="12" font-weight="bold">× N</text>
  
  <!-- Encoder output -->
  <rect x="80" y="360" width="220" height="50" rx="8" fill="#21262d" stroke="#55efc4" stroke-width="2"/>
  <text x="190" y="382" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Encoder Output</text>
  <text x="190" y="400" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">K, V for cross-attention</text>
  
  <!-- DECODER SIDE -->
  <rect x="520" y="60" width="280" height="380" rx="15" fill="#161b22" stroke="#e17055" stroke-width="2"/>
  <text x="660" y="90" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="16" font-weight="bold">DECODER</text>
  
  <!-- Output embedding -->
  <rect x="550" y="115" width="220" height="40" rx="6" fill="#21262d" stroke="#e17055" stroke-width="1"/>
  <text x="660" y="140" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11">Output Embedding + Positional</text>
  
  <!-- Decoder causal self-attention -->
  <rect x="550" y="170" width="220" height="50" rx="8" fill="url(#decBlock)" filter="url(#blockShadow)"/>
  <text x="660" y="192" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Masked Self-Attention</text>
  <text x="660" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="Arial, sans-serif" font-size="10">(Causal)</text>
  
  <!-- Add & Norm -->
  <rect x="550" y="230" width="220" height="25" rx="4" fill="#21262d" stroke="#e17055" stroke-width="1"/>
  <text x="660" y="247" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Add & Layer Norm</text>
  
  <!-- CROSS-ATTENTION (highlighted) -->
  <rect x="550" y="265" width="220" height="50" rx="8" fill="url(#crossBlock)" filter="url(#blockShadow)"/>
  <text x="660" y="287" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Cross-Attention</text>
  <text x="660" y="305" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="Arial, sans-serif" font-size="10">Q from decoder, K/V from encoder</text>
  
  <!-- Add & Norm -->
  <rect x="550" y="325" width="220" height="25" rx="4" fill="#21262d" stroke="#e17055" stroke-width="1"/>
  <text x="660" y="342" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Add & Layer Norm</text>
  
  <!-- FFN -->
  <rect x="550" y="360" width="220" height="40" rx="8" fill="url(#decBlock)" filter="url(#blockShadow)"/>
  <text x="660" y="385" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Feed Forward</text>
  
  <!-- Add & Norm -->
  <rect x="550" y="410" width="220" height="25" rx="4" fill="#21262d" stroke="#e17055" stroke-width="1"/>
  <text x="660" y="427" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Add & Layer Norm</text>
  
  <!-- Nx indicator -->
  <text x="780" y="310" fill="#e17055" font-family="Arial, sans-serif" font-size="12" font-weight="bold">× N</text>
  
  <!-- Cross-attention connection arrow -->
  <path d="M 300 385 C 400 385 400 290 550 290" stroke="#a29bfe" stroke-width="4" fill="none" marker-end="url(#arrow)"/>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#a29bfe"/>
    </marker>
  </defs>
  
  <!-- Label for cross-attention arrow -->
  <rect x="370" y="320" width="80" height="40" rx="6" fill="#161b22" stroke="#a29bfe" stroke-width="2"/>
  <text x="410" y="337" text-anchor="middle" fill="#a29bfe" font-family="Arial, sans-serif" font-size="10" font-weight="bold">K, V</text>
  <text x="410" y="352" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">from encoder</text>
  
  <!-- Output -->
  <rect x="590" y="455" width="140" height="35" rx="6" fill="#21262d" stroke="#fdcb6e" stroke-width="2"/>
  <text x="660" y="477" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="11">Linear + Softmax → Output</text>
</svg>

