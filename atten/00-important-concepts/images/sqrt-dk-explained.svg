<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <linearGradient id="dangerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e17055;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d63031;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="safeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#55efc4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00b894;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="600" fill="#0d1117"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="#fff" font-family="Georgia, serif" font-size="22" font-weight="bold">Why âˆšd_k? The Complete Explanation</text>
  
  <!-- Step 1: The Setup -->
  <rect x="30" y="55" width="840" height="100" rx="12" fill="#161b22" stroke="#58a6ff" stroke-width="2"/>
  <text x="450" y="85" text-anchor="middle" fill="#58a6ff" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Step 1: Understanding the Dot Product</text>
  
  <rect x="50" y="100" width="360" height="40" rx="6" fill="#21262d"/>
  <text x="230" y="125" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">q = [qâ‚, qâ‚‚, ..., q_dk] each with variance ~1</text>
  
  <rect x="490" y="100" width="360" height="40" rx="6" fill="#21262d"/>
  <text x="670" y="125" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">k = [kâ‚, kâ‚‚, ..., k_dk] each with variance ~1</text>
  
  <!-- Step 2: Variance Grows -->
  <rect x="30" y="170" width="400" height="160" rx="12" fill="#161b22" stroke="#e17055" stroke-width="2"/>
  <text x="230" y="200" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Step 2: Variance Grows with d_k</text>
  
  <rect x="50" y="215" width="360" height="100" rx="6" fill="#21262d"/>
  <text x="230" y="240" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">qÂ·k = qâ‚kâ‚ + qâ‚‚kâ‚‚ + ... + q_dkÃ—k_dk</text>
  <text x="230" y="270" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="11">Var(qáµ¢ Ã— káµ¢) = 1 (for each term)</text>
  <text x="230" y="300" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Var(qÂ·k) = d_k (sum of d_k variances)</text>
  
  <!-- Step 3: Problem -->
  <rect x="470" y="170" width="400" height="160" rx="12" fill="#161b22" stroke="#e17055" stroke-width="2"/>
  <text x="670" y="200" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Step 3: The Softmax Problem</text>
  
  <rect x="490" y="215" width="360" height="100" rx="6" fill="#21262d"/>
  <text x="670" y="240" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">Large variance â†’ Large score values</text>
  <text x="670" y="265" text-anchor="middle" fill="#c9d1d9" font-family="Arial, sans-serif" font-size="11">Large scores â†’ softmax saturates</text>
  <text x="670" y="290" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11">Saturated softmax â†’ near-zero gradients</text>
  <text x="670" y="310" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="12" font-weight="bold">ğŸ’€ Training fails!</text>
  
  <!-- Step 4: Solution -->
  <rect x="30" y="350" width="840" height="100" rx="12" fill="#161b22" stroke="#55efc4" stroke-width="2"/>
  <text x="450" y="380" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Step 4: The âˆšd_k Solution</text>
  
  <rect x="50" y="395" width="380" height="45" rx="6" fill="#21262d"/>
  <text x="240" y="415" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="12">Scaled Score = (qÂ·k) / âˆšd_k</text>
  <text x="240" y="432" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Division by âˆšd_k</text>
  
  <rect x="470" y="395" width="380" height="45" rx="6" fill="#21262d"/>
  <text x="660" y="415" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="12">Var(scaled) = d_k / d_k = 1 âœ“</text>
  <text x="660" y="432" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">Variance normalized!</text>
  
  <!-- Numerical Example -->
  <rect x="30" y="470" width="840" height="110" rx="12" fill="#161b22" stroke="#fdcb6e" stroke-width="2"/>
  <text x="450" y="500" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="14" font-weight="bold">ğŸ“Š Concrete Example: d_k = 64</text>
  
  <rect x="50" y="515" width="250" height="50" rx="6" fill="#21262d" stroke="#e17055" stroke-width="1"/>
  <text x="175" y="538" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11">Without scaling:</text>
  <text x="175" y="555" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="11">Scores â‰ˆ [-16, +16]</text>
  
  <text x="450" y="545" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="20">â†’</text>
  
  <rect x="350" y="515" width="200" height="50" rx="6" fill="#21262d"/>
  <text x="450" y="538" text-anchor="middle" fill="#fdcb6e" font-family="Arial, sans-serif" font-size="11">âˆš64 = 8</text>
  <text x="450" y="555" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="11">(divide by 8)</text>
  
  <text x="600" y="545" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="20">â†’</text>
  
  <rect x="600" y="515" width="250" height="50" rx="6" fill="#21262d" stroke="#55efc4" stroke-width="1"/>
  <text x="725" y="538" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">With scaling:</text>
  <text x="725" y="555" text-anchor="middle" fill="#55efc4" font-family="Arial, sans-serif" font-size="11">Scores â‰ˆ [-2, +2] âœ“</text>
</svg>

