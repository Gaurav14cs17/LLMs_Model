<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 450">
  <defs>
    <linearGradient id="loraMainGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="700" height="450" fill="#f8fafc" rx="10"/>
  
  <!-- Title -->
  <text x="350" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#1e293b" text-anchor="middle">LoRA: Low-Rank Adaptation</text>
  
  <!-- Main Architecture -->
  <rect x="40" y="60" width="620" height="280" fill="white" stroke="#c4b5fd" stroke-width="2" rx="10"/>
  
  <!-- Input -->
  <rect x="80" y="180" width="80" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="120" y="205" font-family="Arial, sans-serif" font-size="12" fill="#1e40af" text-anchor="middle" font-weight="bold">Input x</text>
  
  <!-- Arrow to frozen weights -->
  <path d="M165 200 L220 140" stroke="#64748b" stroke-width="2"/>
  <polygon points="218,143 225,135 213,138" fill="#64748b"/>
  
  <!-- Arrow to LoRA -->
  <path d="M165 200 L220 260" stroke="#8b5cf6" stroke-width="2"/>
  <polygon points="218,257 225,265 213,262" fill="#8b5cf6"/>
  
  <!-- Frozen Pre-trained Weights -->
  <rect x="230" y="100" width="150" height="80" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2" rx="8"/>
  <text x="305" y="135" font-family="Arial, sans-serif" font-size="11" fill="#475569" text-anchor="middle" font-weight="bold">Pre-trained W</text>
  <text x="305" y="155" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">ðŸ”’ Frozen</text>
  <text x="305" y="172" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">(d Ã— d)</text>
  
  <!-- LoRA Branch -->
  <g transform="translate(230, 220)">
    <!-- Matrix A -->
    <rect width="60" height="80" fill="url(#loraMainGrad)" rx="5"/>
    <text x="30" y="35" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">A</text>
    <text x="30" y="55" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle" opacity="0.9">(d Ã— r)</text>
    <text x="30" y="72" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle" opacity="0.8">Down</text>
  </g>
  
  <!-- Arrow between A and B -->
  <path d="M295 260 L325 260" stroke="#8b5cf6" stroke-width="2"/>
  <polygon points="323,255 335,260 323,265" fill="#8b5cf6"/>
  
  <g transform="translate(340, 220)">
    <!-- Matrix B -->
    <rect width="60" height="80" fill="url(#loraMainGrad)" rx="5"/>
    <text x="30" y="35" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">B</text>
    <text x="30" y="55" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle" opacity="0.9">(r Ã— d)</text>
    <text x="30" y="72" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle" opacity="0.8">Up</text>
  </g>
  
  <!-- Rank annotation -->
  <rect x="295" y="310" width="50" height="22" fill="#fef3c7" rx="4"/>
  <text x="320" y="325" font-family="Arial, sans-serif" font-size="10" fill="#92400e" text-anchor="middle">r = 8-64</text>
  
  <!-- Addition -->
  <circle cx="480" cy="200" r="25" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="480" y="207" font-family="Arial, sans-serif" font-size="20" fill="#16a34a" text-anchor="middle" font-weight="bold">+</text>
  
  <!-- Arrows to addition -->
  <path d="M385 140 L455 200" stroke="#64748b" stroke-width="2"/>
  <path d="M405 260 L455 200" stroke="#8b5cf6" stroke-width="2"/>
  
  <!-- Output -->
  <path d="M510 200 L550 200" stroke="#22c55e" stroke-width="2"/>
  <polygon points="548,195 560,200 548,205" fill="#22c55e"/>
  
  <rect x="565" y="180" width="80" height="40" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="5"/>
  <text x="605" y="205" font-family="Arial, sans-serif" font-size="12" fill="#16a34a" text-anchor="middle" font-weight="bold">Output</text>
  
  <!-- Formula -->
  <rect x="40" y="360" width="620" height="70" fill="white" stroke="#e2e8f0" stroke-width="2" rx="8"/>
  <text x="350" y="390" font-family="Arial, sans-serif" font-size="16" fill="#1e293b" text-anchor="middle" font-weight="bold">h = Wx + BAx</text>
  <text x="350" y="415" font-family="Arial, sans-serif" font-size="12" fill="#64748b" text-anchor="middle">W: Frozen weights | BÃ—A: Trainable low-rank update (r &lt;&lt; d)</text>
</svg>

